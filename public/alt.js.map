{"version":3,"file":"alt.js","sources":["../node_modules/hyperapp/src/index.js","../node_modules/htm/dist/htm.module.js","../node_modules/domz/index.js","../src/wuf-hyper.js","../src/router.js","../src/config.js","../src/header.js","../src/leader.js","../src/lines.js","../src/products.js","../src/form.js","../src/recaptcha.js","../src/get-started.js","../src/checkout.js","../src/buy.js","../src/post-payment.js","../src/body.js","../src/footer.js","../src/data.js","../src/index.js"],"sourcesContent":["export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      if (typeof value === \"string\") {\n        element.style.cssText = value\n      } else {\n        if (typeof oldValue === \"string\") oldValue = element.style.cssText = \"\"\n        for (var i in clone(oldValue, value)) {\n          var style = value == null || value[i] == null ? \"\" : value[i]\n          if (i[0] === \"-\") {\n            element.style.setProperty(i, style)\n          } else {\n            element.style[i] = style\n          }\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","var n=function(t,r,u,e){for(var p=1;p<r.length;p++){var s=r[p],h=\"number\"==typeof s?u[s]:s,a=r[++p];1===a?e[0]=h:3===a?e[1]=Object.assign(e[1]||{},h):5===a?(e[1]=e[1]||{})[r[++p]]=h:6===a?e[1][r[++p]]+=h+\"\":e.push(a?t.apply(null,n(t,h,u,[\"\",null])):h)}return e},t=function(n){for(var t,r,u=1,e=\"\",p=\"\",s=[0],h=function(n){1===u&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?s.push(n||e,0):3===u&&(n||e)?(s.push(n||e,1),u=2):2===u&&\"...\"===e&&n?s.push(n,3):2===u&&e&&!n?s.push(!0,5,e):u>=5&&((e||!n&&5===u)&&(s.push(e,u,r),u=6),n&&(s.push(n,u,r),u=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===u&&h(),h(a));for(var f=0;f<n[a].length;f++)t=n[a][f],1===u?\"<\"===t?(h(),s=[s],u=3):e+=t:4===u?\"--\"===e&&\">\"===t?(u=1,e=\"\"):e=t+e[0]:p?t===p?p=\"\":e+=t:'\"'===t||\"'\"===t?p=t:\">\"===t?(h(),u=1):u&&(\"=\"===t?(u=5,r=e,e=\"\"):\"/\"===t&&(u<5||\">\"===n[a][f+1])?(h(),3===u&&(s=s[0]),u=s,(s=s[0]).push(u,2),u=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(h(),u=2):e+=t),3===u&&\"!--\"===e&&(u=4,s=s[0])}return h(),s},r=\"function\"==typeof Map,u=r?new Map:{},e=r?function(n){var r=u.get(n);return r||u.set(n,r=t(n)),r}:function(n){for(var r=\"\",e=0;e<n.length;e++)r+=n[e].length+\"-\"+n[e];return u[r]||(u[r]=t(n))};export default function(t){var r=n(this,e(t),arguments,[]);return r.length>1?r:r[0]}\n","const cache = {};\nexport default h =>\n  new Proxy(\n    {},\n    {\n      get: (target, name) => cache[name] || (cache[name] = (...args) =>\n        args[0] && typeof args[0] === \"object\" && !Array.isArray(args[0])\n          ? h(name, ...args)\n          : h(name, {}, ...args))\n    }\n  );\n","import { h, app } from \"hyperapp\";\r\nimport htm from \"htm\";\r\nimport domz from \"domz\";\r\n\r\nconst html = htm.bind(h);\r\nconst hp = domz(h);\r\n\r\n/*\r\nfunction vnode(name) {\r\n  return function (attributes, children) {\r\n    return typeof attributes === \"object\" && !Array.isArray(attributes)\r\n      ? h(name, attributes, children)\r\n      : h(name, {}, attributes)\r\n  }\r\n}\r\n\r\nconst hp = new Proxy({}, {\r\n  get: function(_, tagName) {\r\n    return function (attributes, children) {\r\n      return vnode(tagName)(attributes, children)\r\n    }\r\n  }\r\n})\r\n*/\r\nexport { html, hp, h, app };","Object.fromEntries ||\r\n  (Object.fromEntries = a =>\r\n    a.reduce((a, [k, v]) => Object.assign(a, { [k]: v }), {})); // Edge Polyfill\r\n\r\nconst decode = options =>\r\n  options\r\n    .slice(1)\r\n    .split(\"&\")\r\n    .reduce(\r\n      (a, o) => Object.assign(a, o && Object.fromEntries([o.split(\"=\")])),\r\n      {}\r\n    );\r\n\r\nconst encode = obj =>\r\n  Object.entries(obj)\r\n    .reduce((a, [k, v]) => (k === null ? a : a + k + \"=\" + v + \"&\"), \"?\")\r\n    .slice(0, -1);\r\n\r\nconst toHash = (base, options = {}) => \"#\" + base + encode(options);\r\n\r\nconst fromHash = hash => {\r\n  hash = decodeURIComponent(hash);\r\n  const q = hash.indexOf(\"?\");\r\n  return {\r\n    base: hash.slice(1, q === -1 ? hash.length : q),\r\n    options: q === -1 ? {} : decode(hash.slice(q))\r\n  };\r\n};\r\n\r\nconst Router = {\r\n  init: () => state => {\r\n    // console.log(\"got route\", { hash: window.location.hash });\r\n    const route = fromHash(window.location.hash);\r\n    if (route.base !== state.base || route.options !== state.options)\r\n      return route;\r\n  },\r\n  route: dest => state => {\r\n    let base = dest,\r\n      options = {};\r\n    typeof dest !== \"string\" && ([dest, options = {}] = dest);\r\n    // console.log(\"change route\", JSON.stringify({ dest, options }));\r\n    const location = toHash(dest, options);\r\n    window.location.hash = location;\r\n    return { base, options };\r\n  }\r\n};\r\n\r\nexport { Router, toHash, fromHash };\r\n","const isProduction = window.location.hostname === \"PROD_HOSTNAME\";\r\n\r\nexport default {\r\n  productionHostName: \"PROD_HOSTNAME\",\r\n  isProduction: isProduction,\r\n  stripePublicKeyLive: \"STRIPE_PK_LIVE\",\r\n  stripePublicKeyTest: \"STRIPE_PK_TEST\",\r\n  recaptchaSiteKey: \"6LeAd7cUAAAAAMUty4TeJA9o7CicsgMq89D7bsp0\"\r\n}","import { html, h, app } from \"./wuf-hyper.js\";\r\nimport config from \"./config.js\";\r\n\r\nconst { isProduction } = config;\r\n\r\nconst menuItems = [[\"About\", \"https://www.telanova.com\"]];\r\n\r\nconst Menu = menuItems => html`\r\n  <nav class=\"mr-md-3\">\r\n    ${menuItems.map(\r\n      ([text, link]) => html`\r\n        <a class=\"nav-link\" href=\"${link}\">${text}</a>\r\n      `\r\n    )}\r\n  </nav>\r\n`;\r\n\r\nconst header = () => html`\r\n  <div\r\n    id=\"header\"\r\n    key=\"header\"\r\n    class=\"d-flex flex-row align-items-center p-2 my-2 bg-white border-bottom shadow-sm\"\r\n  >\r\n    ${isProduction\r\n      ? html`\r\n          <a href=\"#\" class=\"pb-2 mr-auto\">\r\n            <img src=\"./telalogo-sm.png\" class=\"img-fluid\" alt=\"telanova\" />\r\n          </a>\r\n        `\r\n      : html`\r\n          <a href=\"#\" class=\"pb-2 mr-auto\">\r\n            <h3 class=\"my-0 mr-auto font-weight-normal\">TESTING</h3>\r\n          </a>\r\n        `}\r\n    ${Menu(menuItems)}\r\n  </div>\r\n`;\r\n//\r\nexport { header };\r\n","import { html, h, app } from \"./wuf-hyper.js\";\r\n\r\nconst leader = (title, text) => html`\r\n  <div class=\"pricing-header py-3 mx-auto text-center\">\r\n    <h3 class=\"display-4\">${title}</h3>\r\n    <p class=\"lead\">${text}</p>\r\n  </div>\r\n`;\r\n\r\nexport { leader };\r\n","import { html, h, app } from \"./wuf-hyper.js\";\r\n\r\nconst lines = (state, actions) => html`\r\n  <ul class=\"list-unstyled\">\r\n    ${Object.entries(state.products.lines).map(\r\n      ([name, { summary, image=\"/100.png\" }], i) => html`\r\n    <li key=\"${name}\" class=\"media ${i && \"my-4\"}\">\r\n\r\n      <img class=\"mr-3\" src=\"${image}\" \r\n        alt=\"${name}\" onclick=\"${() => actions.Router.route(name)}\">\r\n      </img>\r\n\r\n      <div class=\"media-body\">\r\n        <h5 class=\"mt-0 mb-1\">${name}</h5>\r\n        ${summary.join(\"\\n\")}\r\n      </div>\r\n    </li>\r\n  `\r\n    )}\r\n  </ul>\r\n`;\r\n\r\nexport { lines };\r\n","import { html, hp } from \"./wuf-hyper.js\";\r\n\r\nconst { div, h1, h2, h3, h4, p, ul, li, button, a, small } = hp;\r\n\r\nconst Button = ({ item, actions }) => {\r\n  const { name, id, available, minQuantity = 1 } = item;\r\n\r\n  const { page = \"buy\", text, link, style = \"btn-primary\" } = !available\r\n    ? {\r\n        text: \"Information\",\r\n        style: \"btn-outline-primary\"\r\n      }\r\n    : id.slice(0, 3) === \"sku\"\r\n    ? { text: \"Buy\" }\r\n    : id.slice(0, 4) === \"plan\"\r\n    ? { text: \"Subscribe\", link: \"Subscribe to\" }\r\n    : { page: \"getStarted\", text: \"Get started\" };\r\n\r\n  const route = () => {\r\n    actions.setBuyQuantity(minQuantity);\r\n    actions.setBuyQuantityOrigin(minQuantity);\r\n    actions.Router.route([page, { name, type: link || text }]);\r\n  };\r\n\r\n  return button(\r\n    {\r\n      type: \"button\",\r\n      class: `btn btn-lg btn-block ${style}`,\r\n      onclick: route\r\n    },\r\n    text\r\n  );\r\n};\r\n\r\nconst products = (state, actions) =>\r\n  div(\r\n    { class: \"container-fluid\" },\r\n    div(\r\n      { class: \"card-deck mb-3 text-center\" },\r\n      state.products.lines[state.Router.base].products\r\n        .map(i => state.products.items[i])\r\n        .filter(({ id }) => id)\r\n        .map(item => {\r\n          const { name, priceText, unitPrice, unit, features, url } = item;\r\n          //console.log(JSON.stringify(item));\r\n          return div({ key: name, class: \"card mb-4 shadow-sm\" }, [\r\n            div(\r\n              { class: \"card-header\" },\r\n              h4({ class: \"my-0 font-weight-normal\" }, name)\r\n            ),\r\n            div({ class: \"card-body\" }, [\r\n              h1({ class: \"card-title pricing-card-title\" }, [\r\n                priceText || `£${(unitPrice / 100).toFixed(2)} + VAT`,\r\n                small({ class: \"text-muted\" }, ` / ${unit}`)\r\n              ]),\r\n              ul({ class: \"list-unstyled mt-3 mb-4\" }, [\r\n                ...features.map((f, key) => li({ key }, f)),\r\n                !!url &&\r\n                  li(\r\n                    { key: \"url\" },\r\n                    a({ href: url, target: \"_blank\" }, \"Spec sheet\")\r\n                  )\r\n              ]),\r\n              Button({ item, actions })\r\n            ])\r\n          ]);\r\n        })\r\n    )\r\n  );\r\nexport { products };\r\n","import { html, hp } from \"./wuf-hyper.js\";\r\n\r\nconst {\r\n  div,\r\n  h1,\r\n  h2,\r\n  h3,\r\n  h4,\r\n  p,\r\n  ul,\r\n  li,\r\n  button,\r\n  label,\r\n  input,\r\n  form,\r\n  textarea\r\n} = hp;\r\nconst formField = ({\r\n  title = \"\",\r\n  label: labl,\r\n  name,\r\n  id,\r\n  placeholder,\r\n  type,\r\n  required,\r\n  value,\r\n  options\r\n}) => {\r\n  labl = labl || title;\r\n  placeholder = placeholder || title;\r\n  name = name || title.replace(/ /g, \"_\").toLowerCase();\r\n  id = id || name;\r\n  type =\r\n    type ||\r\n    (name.includes(\"number\") && \"number\") ||\r\n    (name.includes(\"email\") && \"email\") ||\r\n    \"text\";\r\n  const c = \"form-control\";\r\n  return div(\r\n    { class: \"form-group\" },\r\n    [\"checkbox\", \"radio\"].includes(type)\r\n      ? [\r\n          label(labl),\r\n          div(\r\n            options.map((v, i) =>\r\n              div(\r\n                {\r\n                  class: `custom-control custom-${type} custom-control-inline`\r\n                },\r\n                [\r\n                  input({\r\n                    type,\r\n                    id: `${id}_${i}`,\r\n                    name: id,\r\n                    class: \"custom-control-input\",\r\n                    value: v\r\n                  }),\r\n                  label({ for: `${id}_${i}`, class: \"custom-control-label\" }, v)\r\n                ]\r\n              )\r\n            )\r\n          )\r\n        ]\r\n      : [\r\n          labl && label({ for: id }, labl),\r\n          type === \"textarea\"\r\n            ? textarea({ id, name, class: c }, value)\r\n            : input(\r\n                { id, name, key: id, placeholder, type, class: c, required },\r\n                value\r\n              )\r\n        ]\r\n  );\r\n};\r\n\r\nconst ezField = f =>\r\n  Array.isArray(f)\r\n    ? formField({ title: f[0], type: \"checkbox\", options: f[1] })\r\n    : typeof f === \"object\"\r\n    ? formField(f)\r\n    : formField({ title: f });\r\n\r\nconst parseFormInputs = form =>\r\n  Array.from(form.elements)\r\n    .filter(\r\n      input => (\r\n        false &&\r\n          console.log(input.type, input.name, input.checked, input.value),\r\n        input.type !== \"submit\"\r\n      )\r\n    )\r\n    .reduce(\r\n      (a, { type, name, checked, value }) =>\r\n        Object.assign(a, {\r\n          [name]:\r\n            type === \"checkbox\"\r\n              ? [...(a[name] || []), ...(checked ? [value] : [])]\r\n              : value\r\n        }),\r\n      {}\r\n    );\r\n\r\nconst Form = ({ fields, onsubmit }) => {\r\n  const onsubmitProp = !onsubmit\r\n    ? {}\r\n    : {\r\n        onsubmit: e => {\r\n          e.preventDefault();\r\n          const formInputs = parseFormInputs(e.target);\r\n          onsubmit(formInputs);\r\n        }\r\n      };\r\n\r\n  return form(onsubmitProp, [\r\n    ...fields,\r\n    div(\r\n      { class: \"form-group\" },\r\n      button(\r\n        { name: \"submit\", type: \"submit\", class: \"btn btn-primary\" },\r\n        \"Submit\"\r\n      )\r\n    )\r\n  ]);\r\n};\r\n\r\nexport { formField, ezField, Form };\r\n","import { html, hp } from \"./wuf-hyper.js\";\r\n\r\nconst recaptchaNode = html`\r\n  <small>This site is protected by reCAPTCHA and the Google \r\n  <a href=\"https://policies.google.com/privacy\"> Privacy Policy</a> and \r\n  <a href=\"https://policies.google.com/terms\"> Terms of Service</a> apply\r\n</small>`\r\n\r\nconst recaptchaToken = (options, callback) => new Promise((resolve, reject) =>\r\n  window.grecaptcha.ready(function() {\r\n    resolve(window.grecaptcha.execute('6LeAd7cUAAAAAMUty4TeJA9o7CicsgMq89D7bsp0', options))\r\n  })\r\n)\r\n\r\nexport {recaptchaNode, recaptchaToken}","import { formField, ezField, Form } from \"./form.js\";\r\nimport { html, hp } from \"./wuf-hyper.js\";\r\nimport { recaptchaNode, recaptchaToken } from \"./recaptcha.js\";\r\nimport config  from \"./config.js\";\r\n\r\nconst  { isProduction } = {config};\r\n\r\nconst { div, h1, h2, h3, h4, p, ul, li, button } = hp;\r\n\r\nconst getStarted = (state, actions) => {\r\n  const { name } = state.Router.options;\r\n  const { line, available } = state.products.items[name];\r\n  const { products } = state.products.lines[line];\r\n\r\n  const availableBody = () => {\r\n    const common = [\r\n      { title: \"Name of your business or organisation\", required: true },\r\n      { title: \"Your name\", required: true },\r\n      { title: \"Your email address\", required: true },\r\n      { title: \"Your mobile or direct phone number\", required: true }\r\n    ];\r\n    const formFields = {\r\n      \"Proactive core\": [\r\n        \"Total number of PCs, Macs and Laptops\",\r\n        \"Number of servers\"\r\n      ],\r\n      \"Proactive enterprise\": [\r\n        \"Total number of PCs, Macs and Laptops\",\r\n        \"Number of servers\"\r\n      ],\r\n      \"Specific project\": [\r\n        \"Number of people who will be using the system\",\r\n        \"The purpose of the project or the desired outcome\",\r\n        [\r\n          \"What you require from telanova\",\r\n          [\"Quotation\", \"Proposal\", \"Information\", \"Advice\", \"Consultancy\"]\r\n        ],\r\n        { placeholder: \".. further information\" },\r\n        [\r\n          \"Matters you have already nailed down\",\r\n          [\"Requirements\", \"Budget\", \"Timescale\", \"Decision process\"]\r\n        ]\r\n      ],\r\n      \"Advice and consultancy\": [\r\n        \"Number of people in your organisation\",\r\n        [\r\n          \"Type of advice or consultancy you are considering\",\r\n          [\r\n            \"Ongoing ad hoc advice\",\r\n            \"For a specific project\",\r\n            \"Virtual CIO or CTO role\"\r\n          ]\r\n        ],\r\n        { placeholder: \".. further information\", name: \"further_information\" }\r\n      ]\r\n    };\r\n\r\n    const onsubmit = obj => {\r\n      const action = name.replace(/[^A-Za-z0-9/]/g, \"/\");\r\n      return recaptchaToken({ action }).then(recaptchaToken => {\r\n        const { base, options } = state.Router;\r\n        fetch(\"./api/enquiry\", {\r\n          method: \"POST\",\r\n          body: JSON.stringify({ isProduction, ...obj, action, recaptchaToken })\r\n        }).then(() =>\r\n          actions.Router.route([base, { ...options, submitted: true }])\r\n        );\r\n      });\r\n    };\r\n\r\n    if (state.Router.options.submitted) {\r\n      return div([\r\n        [\r\n          h4(\"Enquiry confirmation\"),\r\n          p(\"Thank you for your enquiry. We will contact you shortly.\")\r\n        ]\r\n      ]);\r\n    } else if (formFields[name]) {\r\n      return div([\r\n        h4(\"Get started\"),\r\n        p(\r\n          `So we can proceed with our '${name}' service from our '${line}' range, \r\n        please provide details below as appropriate`\r\n        ),\r\n        Form({\r\n          fields: [...common, ...formFields[name]].map(ezField),\r\n          onsubmit\r\n        }),\r\n        recaptchaNode\r\n      ]);\r\n    } else {\r\n    }\r\n  };\r\n\r\n  const unavailableBody = () => {\r\n    const availables = products\r\n      .filter(i => state.products.items[i].available)\r\n      .join(\", \");\r\n    return div([\r\n      h4(\"Your selected product\"),\r\n      p(\r\n        `I'm sorry your selected product, the \r\n        '${name}' product from the '${line}' line,\r\n        is not currently available.`\r\n      ),\r\n      !!availables && p(`These similar products are available: ${availables}`)\r\n    ]);\r\n  };\r\n\r\n  return available ? availableBody() : unavailableBody();\r\n};\r\n\r\nexport { getStarted };\r\n","/*global Stripe, window, sessionStorage */\r\n\r\nimport { html } from \"./wuf-hyper.js\";\r\nimport { toHash } from \"./router.js\";\r\nimport config from \"./config.js\";\r\n\r\nvar stripe = Stripe(config.isProduction ? config.stripePublicKeyLive : config.stripePublicKeyTest);\r\n//const billingAddressCollection = \"required\";\r\n\r\nconst redirectUrl = (status, nonce) => {\r\n  const url = new URL(window.location);\r\n  return (\r\n    url.origin +\r\n    url.pathname +\r\n    url.search +\r\n    toHash(\"Payment\", { status, nonce })\r\n  );\r\n};\r\n\r\nconst checkout = ({ items, successUrl, cancelUrl }) => (state, actions) => {\r\n  if (!successUrl || !cancelUrl) {\r\n    //save app state with nonce guard\r\n    var nonce = Math.floor(Math.random() * 0x1000000000).toString(32);\r\n    const {\r\n      buyQuantity,\r\n      Router: {\r\n        options: { name, type }\r\n      }\r\n    } = state;\r\n    sessionStorage.setItem(\r\n      \"savedState\",\r\n      JSON.stringify({\r\n        nonce,\r\n        state: { buyQuantity, name, type }\r\n      })\r\n    );\r\n  }\r\n  successUrl = successUrl || redirectUrl(\"success\", nonce);\r\n  cancelUrl = cancelUrl || redirectUrl(\"cancelled\", nonce);\r\n  //console.log({successUrl, cancelUrl});\r\n  stripe\r\n    .redirectToCheckout({\r\n      items,\r\n      successUrl,\r\n      cancelUrl\r\n      //billingAddressCollection\r\n    })\r\n    .then(function(result) {\r\n      if (result.error) {\r\n        var displayError = document.getElementById(\"error-message\");\r\n        displayError.textContent = result.error.message;\r\n      }\r\n    });\r\n};\r\n\r\nexport { checkout };\r\n","import { html, hp } from \"./wuf-hyper.js\";\nimport { checkout } from \"./checkout.js\";\n\nconst { a, div, h1, h2, h3, h4, p, ul, li, button, label, input } = hp;\n\nconst buy = (state, actions) => {\n  const { name, type } = state.Router.options;\n  const {\n    id,\n    line,\n    features,\n    unit,\n    unitPrice,\n    multiples,\n    available = 1,\n    minQuantity = 1\n  } = state.products.items[name];\n  const stripeItem = { [type === \"Buy\" ? \"sku\" : \"plan\"]: id };\n  const { information = [], products } = state.products.lines[line];\n\n  const buyButtonText = !multiples\n    ? type\n    : `${type} ${state.buyQuantity} unit${state.buyQuantity > 1 ? \"s\" : \"\"}`;\n\n  const buyButton = () => html`\n    <button\n      type=\"button\"\n      class=\"btn btn-lg btn block btn-primary\"\n      onclick=${() =>\n        checkout({\n          items: [\n            Object.assign({}, stripeItem, { quantity: state.buyQuantity })\n          ]\n        })(state, actions)}\n    >\n      ${buyButtonText}\n    </button>\n  `;\n\n  const integers = n => Array.from(Array(n)).map((v, i) => i);\n\n  const max = (a, b) => (a > b ? a : b);\n\n  const toolbarWidth = 5;\n\n  const qtyToolBar = () => [\n    \"<\",\n    ...integers(toolbarWidth).map(i => i + state.buyQuantityOrigin),\n    \">\"\n  ];\n\n  const per = multiples ? `unit of ${unit}` : unit;\n\n  const availableBody = () =>\n    div([\n      h4(\"Your selected product\"),\n      p(\n        `You are about to purchase the '${name}' product from the '${line}' line`\n      ),\n      information.length && h4(\"Key information, terms and and conditions\"),\n      ...information.map((x, key) => p(x.join(\"\\n\"), { key })),\n      a(\n        {\n          href: \"./TLA - Brochure - Terms and Conditions.pdf\",\n          target: \"_blank\"\n        },\n        p(\"telanova's Terms and conditions (opens in new browser tab)\")\n      ),\n      h4(\"Key features and schedule\"),\n      ul({ class: \"list-unstyled mt-3 mb-4\" }, [\n        ...features.map((f, key) => li(f, { key })),\n        `Priced at £${(unitPrice / 100).toFixed(2)} + VAT = £${(\n          (unitPrice * 3) /\n          250\n        ).toFixed(2)} inc VAT, per ${per}`\n      ]),\n      !!multiples &&\n        div(\n          {\n            class: \"btn-group\",\n            key: \"bBar\",\n            role: \"group\",\n            \"aria-label\": \"Choose quantity\"\n          },\n          qtyToolBar().map((v, i) =>\n            button(\n              {\n                class: \"btn btn-primary active\",\n                key: \"o\" + i,\n                onclick: () => {\n                  if (i === 0)\n                    actions.setBuyQuantityOrigin(\n                      max(state.buyQuantityOrigin - toolbarWidth, minQuantity)\n                    );\n                  else if (i === toolbarWidth + 1)\n                    actions.setBuyQuantityOrigin(\n                      state.buyQuantityOrigin + toolbarWidth\n                    );\n                  else actions.setBuyQuantity(v);\n                }\n              },\n              v\n            )\n          )\n        ),\n      p({ key: \"spacer1\" }),\n      buyButton(),\n      p({ key: \"spacer2\" }),\n      p(\n        { key: \"toStripe\" },\n        \"This button takes you to Stripe, our payment provider\"\n      )\n    ]);\n  //\n  const unavailableBody = () => {\n    const availables = products\n      .filter(i => state.products.items[i].available)\n      .join(\", \");\n    return div([\n      h4(\"Your selected product\"),\n      p(\n        `I'm sorry your selected product, the \n        '${name}' product from the '${line}' line,\n        is not currently available.`\n      ),\n      !!availables && p(`These similar products are available: ${availables}`)\n    ]);\n  };\n\n  return available ? availableBody() : unavailableBody();\n};\n\nexport { buy };\n","import { html, hp } from \"./wuf-hyper.js\";\r\nimport { formField, ezField, Form } from \"./form.js\";\r\nimport { recaptchaNode, recaptchaToken } from \"./recaptcha.js\";\r\nimport config from \"./config.js\";\r\n\r\nconst  { isProduction } = config;\r\n\r\nconst { div, h1, h2, h3, h4, p, ul, li, button, label, input } = hp;\r\n\r\nconst postPayment = (state, actions) => {\r\n  const { status } = state.Router.options;\r\n  const { buyQuantity, name, type } = state.prevState;\r\n\r\n  const common = [\r\n    { title: \"Name of your business or organisation\", required: true },\r\n    { title: \"Your name\", required: true },\r\n    { title: \"Your email address\", required: true },\r\n    { title: \"Your mobile or direct phone number\", required: true }\r\n  ];\r\n\r\n  const onsubmit = obj => {\r\n    const action = name.replace(/[^A-Za-z0-9/]/g, \"/\");\r\n    return recaptchaToken({ action }).then(recaptchaToken => {\r\n      const { base, options } = state.Router;\r\n      fetch(\"./api/enquiry\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ isProduction, ...obj, action, recaptchaToken })\r\n      }).then(() =>\r\n        actions.Router.route([base, { ...options, submitted: true }])\r\n      );\r\n    });\r\n  };\r\n\r\n  return div(\r\n    status === \"success\"\r\n      ? [\r\n          h4(\"Success\"),\r\n          p(\r\n            `Your transaction to ${type.toLowerCase()} a quantity of ${buyQuantity} units of ${name}  \r\n      was successful.`\r\n          )\r\n        ]\r\n      : !state.Router.options.submitted\r\n      ? [\r\n          h4(\"Sorry\"),\r\n          p(\r\n            `Sorry, your transaction to ${type.toLowerCase()} a quantity of ${buyQuantity} units of ${name}  \r\n      was unsuccessful.`\r\n          ),\r\n          p(\r\n            \"Please check your card details or complete your details for a call back\"\r\n          ),\r\n          Form({ fields: common.map(ezField), onsubmit }),\r\n          recaptchaNode\r\n        ]\r\n      : [\r\n          h4(\"Enquiry confirmation\"),\r\n          p(\"Thank you for your enquiry. We will contact you shortly.\")\r\n        ]\r\n  );\r\n};\r\nexport { postPayment };\r\n","import { h, html } from \"./wuf-hyper.js\";\r\nimport { leader } from \"./leader.js\";\r\nimport { lines } from \"./lines.js\";\r\nimport { products } from \"./products.js\";\r\nimport { getStarted } from \"./get-started.js\";\r\nimport { buy } from \"./buy.js\";\r\nimport { postPayment } from \"./post-payment.js\";\r\n\r\nconst body = (state, actions) => {\r\n  const page = state.Router.base;\r\n  return h(\r\n    \"div\",\r\n    { key: \"body\" },\r\n    !state.products.lines\r\n      ? html`\r\n          <p>loading</p>\r\n        `\r\n      : !page\r\n      ? [\r\n          leader(\r\n            \"Online purchasing\",\r\n            `Tech support from telanova, the IT support team that feels like your own. \r\n            For organisations with 5 to 100+ seats.`\r\n          ),\r\n          lines(state, actions)\r\n        ]\r\n      : Object.keys(state.products.lines).includes(page)\r\n      ? [\r\n          leader(page, state.products.lines[page].summary),\r\n          products(state, actions)\r\n        ]\r\n      : page === \"buy\"\r\n      ? buy(state, actions)\r\n      : page === \"getStarted\"\r\n      ? getStarted(state, actions)\r\n      : page === \"Payment\"\r\n      ? postPayment(state, actions)\r\n      : html`\r\n          <p>${page} page</p>\r\n        `\r\n  );\r\n};\r\n\r\nexport { body };\r\n","import { html, h, app } from \"./wuf-hyper.js\";\r\n\r\nconst footer = footerList => (state, actions) => html`\r\n  <footer class=\"pt-4 my-md-5 pt-md-5 border-top\">\r\n    <div class=\"row\">\r\n      <div key=\"Copyright\" class=\"col-12 col-md\">\r\n        <small class=\"d-block mb-3 text-muted\">© Copyright 2017-2019</small>\r\n      </div>\r\n      ${!!state.uiLevel &&\r\n        Object.entries(footerList).map(\r\n          ([title, tuples]) =>\r\n            //FooterList(title, tuples))\r\n            html`\r\n              <div key=\"${title}\" class=\"col-6 col-md\">\r\n                <h5>${title}</h5>\r\n                <ul class=\"list-unstyled text-small\">\r\n                  ${tuples.map(\r\n                    ([text, href]) => html`\r\n                      <li><a class=\"text-muted\" href=\"${href}\">${text}</a></li>\r\n                    `\r\n                  )}\r\n                </ul>\r\n              </div>\r\n            `\r\n        )}\r\n    </div>\r\n  </footer>\r\n`;\r\n\r\nexport { footer };\r\n","const footerList = {\r\n  Features: [\r\n    [\"Cool stuff\", \"#\"],\r\n    [\"Random feature\", \"#\"],\r\n    [\"Team feature\", \"#\"],\r\n    [\"Another one\", \"#\"],\r\n    [\"Last one\", \"#\"]\r\n  ],\r\n  Resources: [\r\n    [\"Resource\", \"#\"],\r\n    [\"Resource name\", \"#\"],\r\n    [\"Another resource\", \"#\"],\r\n    [\"Final resource\", \"#\"]\r\n  ],\r\n  About: [[\"Team\", \"#\"], [\"Locations\", \"#\"], [\"Privacy\", \"#\"], [\"Terms\", \"#\"]]\r\n};\r\n\r\nexport { footerList };\r\n","import { html, h, app } from \"./wuf-hyper.js\";\r\nimport { Router, fromHash, toHash } from \"./router.js\";\r\nimport { header } from \"./header.js\";\r\nimport { body } from \"./body.js\";\r\nimport { footer } from \"./footer.js\";\r\nimport { footerList } from \"./data.js\";\r\nimport config from \"./config.js\";\r\n\r\nconst { isProduction } = config;\r\n\r\nconst state = {\r\n  Router: {\r\n    // base: \"Payment\",\r\n    options: {}\r\n  },\r\n  products: {},\r\n  clicked: 0,\r\n  buyQuantity: 1,\r\n  buyQuantityOrigin: 1,\r\n  uiLevel: 0,\r\n  debug: !isProduction,\r\n  prevState: {\r\n    buyQuantity: 999,\r\n    name: \"Time Bank\",\r\n    type: \"Buy\"\r\n  }\r\n};\r\n\r\nif (!state.Router.base) state.prevState = undefined;\r\n\r\nconst actions = {\r\n  Router,\r\n  click: v => (s, a) => ({ clicked: s.clicked + v || v }),\r\n  setProducts: products => s => ({ products }),\r\n  setBuyQuantity: buyQuantity => ({ buyQuantity }),\r\n  setBuyQuantityOrigin: buyQuantityOrigin => ({ buyQuantityOrigin })\r\n};\r\n\r\nconst route = fromHash(window.location.hash);\r\nif (route.base === \"Payment\" && route.options.nonce) {\r\n  const { nonce, state: prevState } =\r\n    JSON.parse(sessionStorage.getItem(\"savedState\")) || {};\r\n  if (route.options.nonce === nonce) {\r\n    state.prevState = prevState;\r\n    sessionStorage.removeItem(\"savedState\");\r\n    //window.location.hash = toHash(route.base, { status: route.options.status });\r\n  }\r\n}\r\n\r\nconst view = (state, actions) => {\r\n  //console.log(\"render\");\r\n  return h(\"div\", { class: \"container-fluid\" }, [\r\n    header(),\r\n    state.debug &&\r\n      h(\r\n        \"pre\",\r\n        { class: \"debug\", key: \"state\", onclick: e => actions.click(1) },\r\n        \"debug info: \" +\r\n          JSON.stringify(\r\n            Object.assign({}, state, { products: undefined }),\r\n            null,\r\n            2\r\n          )\r\n      ),\r\n    body(state, actions),\r\n    footer(footerList)(state, actions)\r\n  ]);\r\n};\r\n\r\nconst main = app(state, actions, view, document.getElementById(\"app\"));\r\n\r\nfetch(\"products.json\")\r\n  .then(response => response.json())\r\n  .then(products => main.setProducts(products))\r\n  .catch(e => console.log(e));\r\n\r\n!state.Router.base && main.Router.init();\r\n\r\nwindow.addEventListener(\"popstate\", main.Router.init);\r\nwindow.addEventListener(\"hashchange\", main.Router.init);\r\n"],"names":["h","name","attributes","rest","children","length","arguments","push","node","pop","nodeName","key","n","t","r","u","e","p","s","a","Object","assign","apply","replace","f","Map","get","set","cache","html","this","bind","hp","Proxy","target","args","Array","isArray","domz","fromEntries","reduce","k","v","[object Object]","decode","options","slice","split","o","toHash","base","obj","entries","encode","fromHash","hash","q","decodeURIComponent","indexOf","Router","init","state","route","window","location","dest","productionHostName","isProduction","hostname","stripePublicKeyLive","stripePublicKeyTest","recaptchaSiteKey","config","menuItems","header","map","text","link","Menu","leader","title","lines","actions","products","summary","image","i","join","div","h1","h2","h3","h4","ul","li","button","small","Button","item","id","available","minQuantity","page","style","type","class","onclick","setBuyQuantity","setBuyQuantityOrigin","items","filter","priceText","unitPrice","unit","features","url","toFixed","href","label","input","form","textarea","formField","labl","placeholder","required","value","toLowerCase","includes","c","for","ezField","Form","fields","onsubmit","preventDefault","formInputs","from","elements","checked","parseFormInputs","recaptchaNode","recaptchaToken","callback","Promise","resolve","reject","grecaptcha","ready","execute","stripe","Stripe","redirectUrl","status","nonce","URL","origin","pathname","search","buy","line","multiples","stripeItem","information","buyButtonText","buyQuantity","buyButton","successUrl","cancelUrl","Math","floor","random","toString","sessionStorage","setItem","JSON","stringify","redirectToCheckout","then","result","error","document","getElementById","textContent","message","checkout","quantity","integers","qtyToolBar","buyQuantityOrigin","per","x","role","aria-label","b","max","toolbarWidth","availableBody","availables","unavailableBody","body","keys","common","formFields","Proactive core","Proactive enterprise","Specific project","Advice and consultancy","action","fetch","method","submitted","getStarted","prevState","postPayment","footer","footerList","uiLevel","tuples","Features","Resources","About","clicked","debug","undefined","click","setProducts","parse","getItem","removeItem","main","view","container","skipRender","rootElement","oldNode","recycleElement","element","call","childNodes","nodeType","nodeValue","lifecycle","isRecycling","globalState","clone","wiredActions","wireStateToActions","path","data","getPartialState","scheduleRender","setPartialState","concat","resolveNode","render","patch","parent","isSvg","newElement","createElement","createTextNode","createElementNS","oncreate","appendChild","updateAttribute","insertBefore","removeElement","oldAttributes","cb","onupdate","updateElement","oldKeyed","newKeyed","oldElements","oldChildren","oldKey","getKey","newKey","keyedNode","setTimeout","source","out","eventListener","event","currentTarget","events","oldValue","cssText","setProperty","addEventListener","removeEventListener","setAttribute","removeAttribute","done","removeChild","removeChildren","ondestroy","onremove","app","response","json","catch","console","log"],"mappings":"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"}