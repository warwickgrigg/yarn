!function(){"use strict";function e(e,t){for(var n=[],o=[],r=arguments.length;r-- >2;)n.push(arguments[r]);for(;n.length;){var i=n.pop();if(i&&i.pop)for(r=i.length;r--;)n.push(i[r]);else null!=i&&!0!==i&&!1!==i&&o.push(i)}return"function"==typeof e?e(t||{},o):{nodeName:e,attributes:t||{},children:o,key:t&&t.key}}var t=function(e,n,o,r){for(var i=1;i<n.length;i++){var s=n[i],a="number"==typeof s?o[s]:s,u=n[++i];1===u?r[0]=a:3===u?r[1]=Object.assign(r[1]||{},a):5===u?(r[1]=r[1]||{})[n[++i]]=a:6===u?r[1][n[++i]]+=a+"":r.push(u?e.apply(null,t(e,a,o,["",null])):a)}return r},n=function(e){for(var t,n,o=1,r="",i="",s=[0],a=function(e){1===o&&(e||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(e||r,0):3===o&&(e||r)?(s.push(e||r,1),o=2):2===o&&"..."===r&&e?s.push(e,3):2===o&&r&&!e?s.push(!0,5,r):o>=5&&((r||!e&&5===o)&&(s.push(r,o,n),o=6),e&&(s.push(e,o,n),o=6)),r=""},u=0;u<e.length;u++){u&&(1===o&&a(),a(u));for(var c=0;c<e[u].length;c++)t=e[u][c],1===o?"<"===t?(a(),s=[s],o=3):r+=t:4===o?"--"===r&&">"===t?(o=1,r=""):r=t+r[0]:i?t===i?i="":r+=t:'"'===t||"'"===t?i=t:">"===t?(a(),o=1):o&&("="===t?(o=5,n=r,r=""):"/"===t&&(o<5||">"===e[u][c+1])?(a(),3===o&&(s=s[0]),o=s,(s=s[0]).push(o,2),o=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(a(),o=2):r+=t),3===o&&"!--"===r&&(o=4,s=s[0])}return a(),s},o="function"==typeof Map,r=o?new Map:{},i=o?function(e){var t=r.get(e);return t||r.set(e,t=n(e)),t}:function(e){for(var t="",o=0;o<e.length;o++)t+=e[o].length+"-"+e[o];return r[t]||(r[t]=n(e))};const s={};const a=function(e){var n=t(this,i(e),arguments,[]);return n.length>1?n:n[0]}.bind(e),u=(e=>new Proxy({},{get:(t,n)=>s[n]||(s[n]=(...t)=>t[0]&&"object"==typeof t[0]&&!Array.isArray(t[0])?e(n,...t):e(n,{},...t))}))(e);Object.fromEntries||(Object.fromEntries=e=>e.reduce((e,[t,n])=>Object.assign(e,{[t]:n}),{}));const c=e=>e.slice(1).split("&").reduce((e,t)=>Object.assign(e,t&&Object.fromEntries([t.split("=")])),{}),l=(e,t={})=>"#"+e+(e=>Object.entries(e).reduce((e,[t,n])=>null===t?e:e+t+"="+n+"&","?").slice(0,-1))(t),d=e=>{const t=(e=decodeURIComponent(e)).indexOf("?");return{base:e.slice(1,-1===t?e.length:t),options:-1===t?{}:c(e.slice(t))}},p={init:()=>e=>{const t=d(window.location.hash);if(t.base!==e.base||t.options!==e.options)return t},route:e=>t=>{let n=e,o={};"string"!=typeof e&&([e,o={}]=e);const r=l(e,o);return window.location.hash=r,{base:n,options:o}}};var m={productionHostName:"buy.telanova.com",isProduction:"buy.telanova.com"===window.location.hostname,stripePublicKeyLive:"pk_live_UeqWO1qhfSPkdMUTiY055NND",stripePublicKeyTest:"pk_test_agCcaweM7eCVNAHVU3DPTF1O",recaptchaSiteKey:"6LeAd7cUAAAAAMUty4TeJA9o7CicsgMq89D7bsp0"};const{isProduction:y}=m,f=[["About","https://www.telanova.com"]],h=()=>a`
  <div
    id="header"
    key="header"
    class="d-flex flex-row align-items-center p-2 my-2 bg-white border-bottom shadow-sm"
  >
    ${y?a`
          <a href="#" class="pb-2 mr-auto">
            <img src="./telalogo-sm.png" class="img-fluid" alt="telanova" />
          </a>
        `:a`
          <a href="#" class="pb-2 mr-auto">
            <h3 class="my-0 mr-auto font-weight-normal">TESTING</h3>
          </a>
        `}
    ${(e=>a`
  <nav class="mr-md-3">
    ${e.map(([e,t])=>a`
        <a class="nav-link" href="${t}">${e}</a>
      `)}
  </nav>
`)(f)}
  </div>
`,b=(e,t)=>a`
  <div class="pricing-header py-3 mx-auto text-center">
    <h3 class="display-4">${e}</h3>
    <p class="lead">${t}</p>
  </div>
`,v=(e,t)=>a`
  <ul class="list-unstyled">
    ${Object.entries(e.products.lines).map(([e,{summary:n,image:o="/100.png"}],r)=>a`
    <li key="${e}" class="media ${r&&"my-4"}">

      <img class="mr-3" src="${o}" 
        alt="${e}" onclick="${()=>t.Router.route(e)}">
      </img>

      <div class="media-body">
        <h5 class="mt-0 mb-1">${e}</h5>
        ${n.join("\n")}
      </div>
    </li>
  `)}
  </ul>
`,{div:g,h1:k,h2:$,h3:w,h4:T,p:A,ul:P,li:S,button:O,a:x,small:N}=u,R=({item:e,actions:t})=>{const{name:n,id:o,available:r,minQuantity:i=1}=e,{page:s="buy",text:a,link:u,style:c="btn-primary"}=r?"sku"===o.slice(0,3)?{text:"Buy"}:"plan"===o.slice(0,4)?{text:"Subscribe",link:"Subscribe to"}:{page:"getStarted",text:"Get started"}:{text:"Information",style:"btn-outline-primary"};return O({type:"button",class:`btn btn-lg btn-block ${c}`,onclick:()=>{t.setBuyQuantity(i),t.setBuyQuantityOrigin(i),t.Router.route([s,{name:n,type:u||a}])}},a)},q=(e,t)=>g({class:"container-fluid"},g({class:"card-deck mb-3 text-center"},e.products.lines[e.Router.base].products.map(t=>e.products.items[t]).filter(({id:e})=>e).map(e=>{const{name:n,priceText:o,unitPrice:r,unit:i,features:s,url:a}=e;return g({key:n,class:"card mb-4 shadow-sm"},[g({class:"card-header"},T({class:"my-0 font-weight-normal"},n)),g({class:"card-body"},[k({class:"card-title pricing-card-title"},[o||`£${(r/100).toFixed(2)} + VAT`,N({class:"text-muted"},` / ${i}`)]),P({class:"list-unstyled mt-3 mb-4"},[...s.map((e,t)=>S({key:t},e)),!!a&&S({key:"url"},x({href:a,target:"_blank"},"Spec sheet"))]),R({item:e,actions:t})])])}))),{div:C,h1:j,h2:Q,h3:L,h4:B,p:E,ul:I,li:M,button:U,label:Y,input:_,form:F,textarea:V}=u,J=({title:e="",label:t,name:n,id:o,placeholder:r,type:i,required:s,value:a,options:u})=>{t=t||e,r=r||e,n=n||e.replace(/ /g,"_").toLowerCase(),o=o||n,i=i||n.includes("number")&&"number"||n.includes("email")&&"email"||"text";const c="form-control";return C({class:"form-group"},["checkbox","radio"].includes(i)?[Y(t),C(u.map((e,t)=>C({class:`custom-control custom-${i} custom-control-inline`},[_({type:i,id:`${o}_${t}`,name:o,class:"custom-control-input",value:e}),Y({for:`${o}_${t}`,class:"custom-control-label"},e)])))]:[t&&Y({for:o},t),"textarea"===i?V({id:o,name:n,class:c},a):_({id:o,name:n,key:o,placeholder:r,type:i,class:c,required:s},a)])},K=e=>Array.isArray(e)?J({title:e[0],type:"checkbox",options:e[1]}):J("object"==typeof e?e:{title:e}),D=({fields:e,onsubmit:t})=>{return F(t?{onsubmit:e=>{e.preventDefault();const n=(e=>Array.from(e.elements).filter(e=>"submit"!==e.type).reduce((e,{type:t,name:n,checked:o,value:r})=>Object.assign(e,{[n]:"checkbox"===t?[...e[n]||[],...o?[r]:[]]:r}),{}))(e.target);t(n)}}:{},[...e,C({class:"form-group"},U({name:"submit",type:"submit",class:"btn btn-primary"},"Submit"))])},G=a`
  <small>This site is protected by reCAPTCHA and the Google 
  <a href="https://policies.google.com/privacy"> Privacy Policy</a> and 
  <a href="https://policies.google.com/terms"> Terms of Service</a> apply
</small>`,W=(e,t)=>new Promise((t,n)=>window.grecaptcha.ready(function(){t(window.grecaptcha.execute("6LeAd7cUAAAAAMUty4TeJA9o7CicsgMq89D7bsp0",e))})),{isProduction:H}={config:m},{div:z,h1:Z,h2:X,h3:ee,h4:te,p:ne,ul:oe,li:re,button:ie}=u;var se=Stripe(m.isProduction?m.stripePublicKeyLive:m.stripePublicKeyTest);const ae=(e,t)=>{const n=new URL(window.location);return n.origin+n.pathname+n.search+l("Payment",{status:e,nonce:t})},{a:ue,div:ce,h1:le,h2:de,h3:pe,h4:me,p:ye,ul:fe,li:he,button:be,label:ve,input:ge}=u,ke=(e,t)=>{const{name:n,type:o}=e.Router.options,{id:r,line:i,features:s,unit:u,unitPrice:c,multiples:l,available:d=1,minQuantity:p=1}=e.products.items[n],m={["Buy"===o?"sku":"plan"]:r},{information:y=[],products:f}=e.products.lines[i],h=l?`${o} ${e.buyQuantity} unit${e.buyQuantity>1?"s":""}`:o,b=()=>a`
    <button
      type="button"
      class="btn btn-lg btn block btn-primary"
      onclick=${()=>(({items:e,successUrl:t,cancelUrl:n})=>(o,r)=>{if(!t||!n){var i=Math.floor(68719476736*Math.random()).toString(32);const{buyQuantity:e,Router:{options:{name:t,type:n}}}=o;sessionStorage.setItem("savedState",JSON.stringify({nonce:i,state:{buyQuantity:e,name:t,type:n}}))}t=t||ae("success",i),n=n||ae("cancelled",i),se.redirectToCheckout({items:e,successUrl:t,cancelUrl:n}).then(function(e){e.error&&(document.getElementById("error-message").textContent=e.error.message)})})({items:[Object.assign({},m,{quantity:e.buyQuantity})]})(e,t)}
    >
      ${h}
    </button>
  `,v=e=>Array.from(Array(e)).map((e,t)=>t),g=()=>["<",...v(5).map(t=>t+e.buyQuantityOrigin),">"],k=l?`unit of ${u}`:u;return d?(()=>ce([me("Your selected product"),ye(`You are about to purchase the '${n}' product from the '${i}' line`),y.length&&me("Key information, terms and and conditions"),...y.map((e,t)=>ye(e.join("\n"),{key:t})),ue({href:"./TLA - Brochure - Terms and Conditions.pdf",target:"_blank"},ye("telanova's Terms and conditions (opens in new browser tab)")),me("Key features and schedule"),fe({class:"list-unstyled mt-3 mb-4"},[...s.map((e,t)=>he(e,{key:t})),`Priced at £${(c/100).toFixed(2)} + VAT = £${(3*c/250).toFixed(2)} inc VAT, per ${k}`]),!!l&&ce({class:"btn-group",key:"bBar",role:"group","aria-label":"Choose quantity"},g().map((n,o)=>be({class:"btn btn-primary active",key:"o"+o,onclick:()=>{0===o?t.setBuyQuantityOrigin(((e,t)=>e>t?e:t)(e.buyQuantityOrigin-5,p)):6===o?t.setBuyQuantityOrigin(e.buyQuantityOrigin+5):t.setBuyQuantity(n)}},n))),ye({key:"spacer1"}),b(),ye({key:"spacer2"}),ye({key:"toStripe"},"This button takes you to Stripe, our payment provider")]))():(()=>{const t=f.filter(t=>e.products.items[t].available).join(", ");return ce([me("Your selected product"),ye(`I'm sorry your selected product, the \n        '${n}' product from the '${i}' line,\n        is not currently available.`),!!t&&ye(`These similar products are available: ${t}`)])})()},{isProduction:$e}=m,{div:we,h1:Te,h2:Ae,h3:Pe,h4:Se,p:Oe,ul:xe,li:Ne,button:Re,label:qe,input:Ce}=u,je=(t,n)=>{const o=t.Router.base;return e("div",{key:"body"},t.products.lines?o?Object.keys(t.products.lines).includes(o)?[b(o,t.products.lines[o].summary),q(t,n)]:"buy"===o?ke(t,n):"getStarted"===o?((e,t)=>{const{name:n}=e.Router.options,{line:o,available:r}=e.products.items[n],{products:i}=e.products.lines[o];return r?(()=>{const r=[{title:"Name of your business or organisation",required:!0},{title:"Your name",required:!0},{title:"Your email address",required:!0},{title:"Your mobile or direct phone number",required:!0}],i={"Proactive core":["Total number of PCs, Macs and Laptops","Number of servers"],"Proactive enterprise":["Total number of PCs, Macs and Laptops","Number of servers"],"Specific project":["Number of people who will be using the system","The purpose of the project or the desired outcome",["What you require from telanova",["Quotation","Proposal","Information","Advice","Consultancy"]],{placeholder:".. further information"},["Matters you have already nailed down",["Requirements","Budget","Timescale","Decision process"]]],"Advice and consultancy":["Number of people in your organisation",["Type of advice or consultancy you are considering",["Ongoing ad hoc advice","For a specific project","Virtual CIO or CTO role"]],{placeholder:".. further information",name:"further_information"}]},s=o=>{const r=n.replace(/[^A-Za-z0-9\/]/g,"/");return W({action:r}).then(n=>{const{base:i,options:s}=e.Router;fetch("./api/enquiry",{method:"POST",body:JSON.stringify({isProduction:H,...o,action:r,recaptchaToken:n})}).then(()=>t.Router.route([i,{...s,submitted:!0}]))})};return e.Router.options.submitted?z([[te("Enquiry confirmation"),ne("Thank you for your enquiry. We will contact you shortly.")]]):i[n]?z([te("Get started"),ne(`So we can proceed with our '${n}' service from our '${o}' range, \n        please provide details below as appropriate`),D({fields:[...r,...i[n]].map(K),onsubmit:s}),G]):void 0})():(()=>{const t=i.filter(t=>e.products.items[t].available).join(", ");return z([te("Your selected product"),ne(`I'm sorry your selected product, the \n        '${n}' product from the '${o}' line,\n        is not currently available.`),!!t&&ne(`These similar products are available: ${t}`)])})()})(t,n):"Payment"===o?((e,t)=>{const{status:n}=e.Router.options,{buyQuantity:o,name:r,type:i}=e.prevState;return we("success"===n?[Se("Success"),Oe(`Your transaction to ${i.toLowerCase()} a quantity of ${o} units of ${r}  \n      was successful.`)]:e.Router.options.submitted?[Se("Enquiry confirmation"),Oe("Thank you for your enquiry. We will contact you shortly.")]:[Se("Sorry"),Oe(`Sorry, your transaction to ${i.toLowerCase()} a quantity of ${o} units of ${r}  \n      was unsuccessful.`),Oe("Please check your card details or complete your details for a call back"),D({fields:[{title:"Name of your business or organisation",required:!0},{title:"Your name",required:!0},{title:"Your email address",required:!0},{title:"Your mobile or direct phone number",required:!0}].map(K),onsubmit:n=>{const o=r.replace(/[^A-Za-z0-9\/]/g,"/");return W({action:o}).then(r=>{const{base:i,options:s}=e.Router;fetch("./api/enquiry",{method:"POST",body:JSON.stringify({isProduction:$e,...n,action:o,recaptchaToken:r})}).then(()=>t.Router.route([i,{...s,submitted:!0}]))})}}),G])})(t,n):a`
          <p>${o} page</p>
        `:[b("Online purchasing","Tech support from telanova, the IT support team that feels like your own. \n            For organisations with 5 to 100+ seats."),v(t,n)]:a`
          <p>loading</p>
        `)},Qe=e=>(t,n)=>a`
  <footer class="pt-4 my-md-5 pt-md-5 border-top">
    <div class="row">
      <div key="Copyright" class="col-12 col-md">
        <small class="d-block mb-3 text-muted">© Copyright 2017-2019</small>
      </div>
      ${!!t.uiLevel&&Object.entries(e).map(([e,t])=>a`
              <div key="${e}" class="col-6 col-md">
                <h5>${e}</h5>
                <ul class="list-unstyled text-small">
                  ${t.map(([e,t])=>a`
                      <li><a class="text-muted" href="${t}">${e}</a></li>
                    `)}
                </ul>
              </div>
            `)}
    </div>
  </footer>
`,Le={Features:[["Cool stuff","#"],["Random feature","#"],["Team feature","#"],["Another one","#"],["Last one","#"]],Resources:[["Resource","#"],["Resource name","#"],["Another resource","#"],["Final resource","#"]],About:[["Team","#"],["Locations","#"],["Privacy","#"],["Terms","#"]]},{isProduction:Be}=m,Ee={Router:{options:{}},products:{},clicked:0,buyQuantity:1,buyQuantityOrigin:1,uiLevel:0,debug:!Be,prevState:{buyQuantity:999,name:"Time Bank",type:"Buy"}};Ee.Router.base||(Ee.prevState=void 0);const Ie={Router:p,click:e=>(t,n)=>({clicked:t.clicked+e||e}),setProducts:e=>t=>({products:e}),setBuyQuantity:e=>({buyQuantity:e}),setBuyQuantityOrigin:e=>({buyQuantityOrigin:e})},Me=d(window.location.hash);if("Payment"===Me.base&&Me.options.nonce){const{nonce:e,state:t}=JSON.parse(sessionStorage.getItem("savedState"))||{};Me.options.nonce===e&&(Ee.prevState=t,sessionStorage.removeItem("savedState"))}const Ue=function(e,t,n,o){var r,i=[].map,s=o&&o.children[0]||null,a=s&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:i.call(t.childNodes,function(t){return 3===t.nodeType?t.nodeValue:e(t)})}}(s),u=[],c=!0,l=f(e),d=function e(t,n,o){for(var r in o)"function"==typeof o[r]?function(e,r){o[e]=function(e){var i=r(e);return"function"==typeof i&&(i=i(b(t,l),o)),i&&i!==(n=b(t,l))&&!i.then&&y(l=h(t,f(n,i),l)),i}}(r,o[r]):e(t.concat(r),n[r]=f(n[r]),o[r]=f(o[r]));return o}([],l,f(t));return y(),d;function p(e){return"function"==typeof e?p(e(l,d)):null!=e?e:""}function m(){r=!r;var e=p(n);for(o&&!r&&(s=function e(t,n,o,r,i){if(r===o);else if(null==o||o.nodeName!==r.nodeName){var s=function e(t,n){var o="string"==typeof t||"number"==typeof t?document.createTextNode(t):(n=n||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName);var r=t.attributes;if(r){r.oncreate&&u.push(function(){r.oncreate(o)});for(var i=0;i<t.children.length;i++)o.appendChild(e(t.children[i]=p(t.children[i]),n));for(var s in r)k(o,s,r[s],null,n)}return o}(r,i);t.insertBefore(s,n),null!=o&&$(t,n,o),n=s}else if(null==o.nodeName)n.nodeValue=r;else{!function(e,t,n,o){for(var r in f(t,n))n[r]!==("value"===r||"checked"===r?e[r]:t[r])&&k(e,r,n[r],t[r],o);var i=c?n.oncreate:n.onupdate;i&&u.push(function(){i(e,t)})}(n,o.attributes,r.attributes,i=i||"svg"===r.nodeName);for(var a={},l={},d=[],m=o.children,y=r.children,h=0;h<m.length;h++){d[h]=n.childNodes[h];var b=v(m[h]);null!=b&&(a[b]=[d[h],m[h]])}for(var h=0,g=0;g<y.length;){var b=v(m[h]),w=v(y[g]=p(y[g]));if(l[b])h++;else if(null==w||w!==v(m[h+1]))if(null==w||c)null==b&&(e(n,d[h],m[h],y[g],i),g++),h++;else{var T=a[w]||[];b===w?(e(n,T[0],T[1],y[g],i),h++):T[0]?e(n,n.insertBefore(T[0],d[h]),T[1],y[g],i):e(n,d[h],null,y[g],i),l[w]=y[g],g++}else null==b&&$(n,d[h],m[h]),h++}for(;h<m.length;)null==v(m[h])&&$(n,d[h],m[h]),h++;for(var h in a)l[h]||$(n,a[h][0],a[h][1])}return n}(o,s,a,a=e)),c=!1;u.length;)u.pop()()}function y(){r||(r=!0,setTimeout(m))}function f(e,t){var n={};for(var o in e)n[o]=e[o];for(var o in t)n[o]=t[o];return n}function h(e,t,n){var o={};return e.length?(o[e[0]]=e.length>1?h(e.slice(1),t,n[e[0]]):t,f(n,o)):t}function b(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function v(e){return e?e.key:null}function g(e){return e.currentTarget.events[e.type](e)}function k(e,t,n,o,r){if("key"===t);else if("style"===t)if("string"==typeof n)e.style.cssText=n;else for(var i in"string"==typeof o&&(o=e.style.cssText=""),f(o,n)){var s=null==n||null==n[i]?"":n[i];"-"===i[0]?e.style.setProperty(i,s):e.style[i]=s}else"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?o||(o=e.events[t]):e.events={},e.events[t]=n,n?o||e.addEventListener(t,g):e.removeEventListener(t,g)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!r?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),null!=n&&!1!==n||e.removeAttribute(t)}function $(e,t,n){function o(){e.removeChild(function e(t,n){var o=n.attributes;if(o){for(var r=0;r<n.children.length;r++)e(t.childNodes[r],n.children[r]);o.ondestroy&&o.ondestroy(t)}return t}(t,n))}var r=n.attributes&&n.attributes.onremove;r?r(t,o):o()}}(Ee,Ie,(t,n)=>e("div",{class:"container-fluid"},[h(),t.debug&&e("pre",{class:"debug",key:"state",onclick:e=>n.click(1)},"debug info: "+JSON.stringify(Object.assign({},t,{products:void 0}),null,2)),je(t,n),Qe(Le)(t,n)]),document.getElementById("app"));fetch("products.json").then(e=>e.json()).then(e=>Ue.setProducts(e)).catch(e=>console.log(e)),!Ee.Router.base&&Ue.Router.init(),window.addEventListener("popstate",Ue.Router.init),window.addEventListener("hashchange",Ue.Router.init)}();
//# sourceMappingURL=alt.js.map
